<!DOCTYPE html>
<!-- 
Copyright 2014 JWACK APPS
All rights reserved
jwackapps.com
Created by Andrew B. Kiger
ajkiger@gmail.com
-->

<html>

<head>
<title>WC-Weekly</title>
<meta charset="utf-8">

<meta id="viewport" name="viewport" content="width=device-width, initial-scale=1, user-scalable=no, minimal-ui">
<!--
<meta name="MobileOptimized" content="640">
<meta name="HandheldFriendly" content="True">
-->
<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-status-bar-style" content="black">
    
<!--<script  type="text/javascript" src="console-log-viewer.js"></script>-->

<script type="text/javascript">
    var iWinConsole = false;
    
    var readGameStrings;
    var firstTimeThru1;
    var agent = navigator.userAgent.toLowerCase();
    var isWindowsPhone = (agent.indexOf('msie') > -1 && ((agent.indexOf('windows') > -1) || (agent.indexOf('macintosh') > -1) || (agent.indexOf('linux') > -1)) && agent.indexOf('touch') > -1);
    var isFireFoxDesktop = (agent.indexOf('firefox') > -1 && ((agent.indexOf('windows') > -1) || (agent.indexOf('macintosh') > -1) || (agent.indexOf('linux') > -1)) && agent.indexOf('mobile') < 0);
    var isiOSMobile = ((agent.indexOf('iphone') > -1 || agent.indexOf('ipad') > -1) && agent.indexOf('mobile') > -1 );
    var isSafariDesktop = (agent.indexOf('safari') > -1 && ((agent.indexOf('windows') > -1) || (agent.indexOf('macintosh') > -1) || (agent.indexOf('linux') > -1)) && agent.indexOf('chrome') < 0 && agent.indexOf('mobile') < 0);
    if (isFireFoxDesktop){
        firstTimeThru1 = true;
    }
    else{
        firstTimeThru1 = false;
    }
    console.log('firstTimeThru1: ' + firstTimeThru1);
    
</script>

<!--<script src="webgl-debug.js"></script>-->
<link rel="apple-touch-icon" sizes="60x60" href="images/apple-touch-icon.png">
<link rel="apple-touch-icon" sizes="76x76" href="images/apple-touch-icon-76x76.png">
<link rel="apple-touch-icon" sizes="120x120" href="images/apple-touch-icon-120x120.png">
<link rel="apple-touch-icon" sizes="152x152" href="images/apple-touch-icon-152x152.png">

<script src="../iconsole.js" type="text/javascript"></script>

<script  type="text/javascript" src="lowLag.js"></script>
<script  type="text/javascript" src="sm2/js/soundmanager2-jsmin.js"></script>

<script  type="text/javascript" src="soundjs-0.5.2.min.js"></script>
<script  type="text/javascript" src="preloadjs-0.4.1.min.js"></script>

<script type="text/javascript" src="jquery-1.10.2.js"></script>

<script type="text/javascript" src="jquery-ui-1.10.4.custom.min.js"></script>
<link rel="stylesheet" href="jquery-ui-1.10.4.custom.min.css">

<script type="text/javascript" src="jquery.mobile-1.4.2.js"></script>
<link rel="stylesheet" href="jquery.mobile-1.4.2.min.css">


<script type="text/javascript" src="jquery.mobile-events.js"></script>
<script type="text/javascript" src="gl-matrix-min.js"></script>
<script type="text/javascript" src="webgl-utils.js"></script>


<script type="text/javascript" src="EAGLView.js"></script>
<script type="text/javascript" src="SceneController.js"></script>
<script type="text/javascript" src="CubeObject.js"></script>
<script type="text/javascript" src="CubeMesh.js"></script>
<script type="text/javascript" src="cube4x4.js"></script>
<script type="text/javascript" src="cube5x5.js"></script>
<script type="text/javascript" src="cube6x6.js"></script>
<script type="text/javascript" src="InputViewController.js"></script>
<script type="text/javascript" src="geometryF.js"></script>
<script type="text/javascript" src="LetterSquareObject.js"></script>
<script type="text/javascript" src="ActiveLetterImage.js"></script>
<script type="text/javascript" src="WordListObject.js"></script>
<script type="text/javascript" src="ParticleSystem.js"></script>
<script type="text/javascript" src="Particle.js"></script>
<script type="text/javascript" src="TableRowObject.js"></script>

<script type='application/javascript' src='fastclick.js'></script>



<style>
    
    #splash {
        position: fixed; 
        width: 100%; 
        height: 100%;
        z-index: 10;
    }
    
    #splash img {
        position: absolute;
        top: 0px; 
        left: 0px; 
        right: 0px; 
        bottom: 0px; 
        margin: auto; 
        width: 100%;
        height: 100%;
        
    }
    
    #progressbar {
        position: fixed;
        top: 85%; 
        left: 0; 
        right: 0; 
        bottom: 15%;
        width: 75%;
        margin: auto;
        z-index: 15;
    }

    #progressbar > div {
        background-color: black;
        border-radius: 13px; /* (height of inner div) / 2 + padding */
        padding: 3px;
    }
    
    #progressbar > div > div {
        background-color:  darkgoldenrod;
        width: 0%; /* Adjust with JavaScript */
        height: 20px;
        border-radius: 10px;
    }
    
    
    body, html {
        
        background-color: #000000;
        color: black;
        
        height: 100%;
        width: 100%;
        
        overflow-x: hidden;
        overflow-y: hidden;
        -ms-touch-action: none;
        
        
    }
    
    #pageWH{
        
        background-color: #000000;
        -ms-touch-action: none;
    }
    
    #topHeader{
        
        width: 640px;
        margin-left: auto;
        margin-right: auto;
        background-color: #eee;
        
        
        overflow:  hidden;
        -ms-touch-action: none;
        
        
    }
    
    #WordCubed-canvas{
        width: 640px;
        height: 640px;
        
    }
    
    #container{
        width: 640px;
        height: 640px;
        margin-left: auto;
        margin-right: auto;
        
        
        opacity:0.0;
        filter:alpha(opacity=100); /* For IE8 and earlier */
        background-color: #C8BEB7;
        
        overflow:  hidden;
        -ms-touch-action: none;
        
        cursor:  pointer;
    }
    
    
    
    #bottomFooter{
        
        width: 630px;
        height: 85px;
        
        margin-left: auto;
        margin-right: auto;
        
        
        padding-top: 2px;
        padding-bottom: 2px;
        padding-left: 5px;
        padding-right: 5px;
        
        
        overflow:  hidden;
        -ms-touch-action: none;
        
        
        background-color:  #eee;
        
        font-family: arial, Helvetica, sans-serif;
        font-size:  32px; 
        font-weight:  700;
        
        
    }
    
    #popupHints, #popupSettings, #popupWin {
        width: 500px;
        font-family: arial, Helvetica, sans-serif;
        -ms-touch-action: none;
    }
    
    #popupGames, #popupTabs {
        width: 600px;
        font-family: arial, Helvetica, sans-serif;
        -ms-touch-action: none;
        
        margin-top: 0px;
        margin-bottom: 0px;
        padding-top: 2px;
        padding-bottom: 0px;
        
        top:0px;
    }
    
    #showHint, #solveTheCube, #buttonNewGame, #check1id, #check2id, #check3id, #check4id {
        
        font-family: arial, Helvetica, sans-serif;
        font-size:  28px; 
        font-weight:  700;
        text-align: center;
    }
    
    #placeCheck1, #placeCheck2, #placeCheck3, #placeCheck4 {
        text-align: left;
    }
    
    
    
    #wordbox{
        margin-top: 0px;
        margin-bottom: 0px;
        cursor:  pointer;
        
        -ms-touch-action: none;
    }
    
    
    #popupBasic{
        
        
        
        padding-top: 0px;
        padding-bottom: 0px;
        padding-left: 5px;
        padding-right: 5px;
        
        font-family: arial, Helvetica, sans-serif;
        font-size:  32px; 
        font-weight:  700;
        -ms-touch-action: none;
        
    }
    
    #popupIHelp {
        
        padding-top: 2px;
        padding-bottom: 2px;
        padding-left: 2px;
        padding-right: 2px;
        
        background-color: #C8BEB7;
    }
    
    
    
    #btncontainer{
        width: 640px;
        
        margin-left: auto;
        margin-right: auto;
        
    }
    
    
    #btnhints, #btnsettings, #btngames, #btninfo {
        width: 86px;
        height: 86px;
        margin-left: 1px;
        margin-right: 1px;
        margin-top: 1px;
        margin-bottom: 1px;
        padding-top: 0px;
        padding-bottom: 0px;
        padding-left: 0px;
        padding-right: 0px;
        cursor:  pointer;
        
    }
    
    
    
    #starimage {
        width: 50px;
        height: 50px;
        
    }
    
    
    
    #starbox {
        
    }
    
    #namebox{
        width: 640px;
        
        
    }
    
    #srsbox{
        vertical-align: bottom;
        
    }
    
    #scoreratebox{
        font-family: arial, Helvetica, sans-serif;
        font-size:  32px; 
        font-weight:  700;
        
        
    }
    
    #scorebox{
        
        font-family: arial, Helvetica, sans-serif;
        font-size:  32px; 
        font-weight:  700;
        
        
    }
    
    #btnTable{
        width: 100%;
        border-collapse: collapse;
        table-layout:fixed;
    }
    
    #btnTable td{
        padding-right: 10px;
        padding-left: 10px;
        text-align: center;
        overflow: hidden;
    }
    
    div#popupGames { width: 600px; margin: 1px 0;}
    div#popupGames table { margin: 1em 0; padding: 1em 0; border-collapse: collapse; width: 100%; }
    div#popupGames table td, div#popupGames table th, div#popupGames table tfoot { border: 1px solid #eee; padding: .6em 10px; text-align: center; font-size: 20px; font-weight: 700;}
    
    
    div#popupGames table tbody tr:hover {
    cursor: pointer;
    
    
    }
    
    
    div#popupWin table td{
        text-align: center;
    }
    
    
    div#popupTabs table td{
        text-align: center;
    }
    
    
    
    #tabs-1, #tabs-2, #tabs-3, #tabs-1x, #tabs-2x, #tabs-3x {
        font-family: arial, Helvetica, sans-serif;
        font-size: 28px;
        font-weight: 700;
        
        padding-top: 0px;
        padding-bottom: 0px;
        margin-top: 20px;
        margin-bottom: 5px;
    }
    
    #tabs-4 {
        font-family: arial, Helvetica, sans-serif;
        font-size: 24px;
        font-weight: 700;
        
        padding-top: 0px;
        padding-bottom: 0px;
        margin-top: 20px;
        margin-bottom: 5px;
    }
    
    
    
    
    .ui-header .ui-title {
        margin-right: 10%;
        margin-left: 10%;
    }
    
    
    
    #popupHeader51, #popupHeader52, #popupHeader53, #popupHeader54 {
        
        font-size: 14px;
        
    }
    
    
    
    
    
</style>

<script id="shader-fs" type="x-shader/x-fragment">
    precision mediump float;

    varying vec4 vColor;
    varying vec2 vTextureCoord;
    varying vec3 vLightWeighting;
    
    uniform float uAlpha;
    
    uniform sampler2D uSampler;
    
    
    void main(void) {
        vec4 textureColor = texture2D(uSampler, vec2(vTextureCoord.s, vTextureCoord.t));
        gl_FragColor = vec4(textureColor.rgb * vLightWeighting.rgb * vColor.rgb, textureColor.a * uAlpha); // * vColor.rgb
  }
</script>

<script id="shader-vs" type="x-shader/x-vertex">
    attribute vec3 aVertexPosition;
    attribute vec4 aVertexColor;
    attribute vec3 aVertexNormal;
    attribute vec2 aTextureCoord;
    attribute vec3 aTextureCoorduv;
    
    uniform mat4 uMVMatrix;
    uniform mat4 uPMatrix;
    uniform mat3 uNMatrix;
    
    //uniform float uRAngle;
    //uniform float xUmin;
    //uniform float xVmin;

    uniform vec3 uLightPosition;
    uniform vec3 uAmbientLightColor;
    uniform vec3 uDiffuseLightColor;
    uniform vec3 uSpecularLightColor;

    varying vec4 vColor;
    varying vec2 vTextureCoord;
    varying vec3 vLightWeighting;
    
    const float shininess = 32.0;

    void main(void) {
        gl_Position = uPMatrix * uMVMatrix * vec4(aVertexPosition, 1.0);
        //vTextureCoord = vec2(((aTextureCoord.x - 0.5) * cos(uRAngle) - (aTextureCoord.y  - 0.5) * sin(uRAngle)) + 0.5, ((aTextureCoord.x - 0.5) * sin(uRAngle) + (aTextureCoord.y - 0.5) * cos(uRAngle)) + 0.5);
        //vTextureCoord = vec2(aTextureCoord.x , aTextureCoord.y);
        //vTextureCoord = vec2(((aTextureCoord.x - (aTextureCoorduv.x + 0.0625)) * cos(uRAngle) - (aTextureCoord.y  - (aTextureCoorduv.y + 0.0625)) * sin(uRAngle)) + aTextureCoorduv.x + 0.0625, ((aTextureCoord.x - (aTextureCoorduv.x + 0.0625)) * sin(uRAngle) + (aTextureCoord.y - (aTextureCoorduv.y + 0.0625)) * cos(uRAngle)) + aTextureCoorduv.y + 0.0625);
        vTextureCoord = vec2(((aTextureCoord.x - (aTextureCoorduv.x + 0.0625)) * cos(aTextureCoorduv.z) - (aTextureCoord.y  - (aTextureCoorduv.y + 0.0625)) * sin(aTextureCoorduv.z)) + aTextureCoorduv.x + 0.0625, ((aTextureCoord.x - (aTextureCoorduv.x + 0.0625)) * sin(aTextureCoorduv.z) + (aTextureCoord.y - (aTextureCoorduv.y + 0.0625)) * cos(aTextureCoorduv.z)) + aTextureCoorduv.y + 0.0625);
        
        vColor = aVertexColor;

        vec4 vertexPositionEye4 = uMVMatrix * vec4(aVertexPosition, 1.0);
        vec3 vertexPositionEye3 = vertexPositionEye4.xyz / vertexPositionEye4.w;

        vec3 vectorToLightSource = normalize(uLightPosition - vertexPositionEye3);

        vec3 normalEye = normalize(uNMatrix * aVertexNormal);

        float diffuseLightWeighting = max(dot(normalEye, vectorToLightSource), 0.0);

        vec3 reflectionVector = normalize(reflect(-vectorToLightSource, normalEye));

        vec3 viewVectorEye = -normalize(vertexPositionEye3);

        float rdotv = max(dot(reflectionVector, viewVectorEye), 0.0);

        float specularLightWeighting = pow(rdotv, shininess);

        vLightWeighting = uAmbientLightColor + uDiffuseLightColor * diffuseLightWeighting + uSpecularLightColor * specularLightWeighting;
    }
</script>


<script type="text/javascript">

    
    var gl;
    var canvas;
    var allLettersTexture;
    var yellowStarTexture;
    var redStarTexture;
    var blueStarTexture;
    var blackStarTexture;
    
    var containerScale = true;
    var browserWidth;
    var browserHeight;
    var pixelRatio;
    var tempScale;
    var tempScaleW;
    var tempScaleH;
    var mvp;
    //var agent;
    //var isFireFoxDesktop;
    //var isWindowsPhone;
    var cWidth;
    
    var tappedHWDCheckBox = false;
    var tappedICCheckBox = false;
    var iHelp = true;
    var iHelpOpen = undefined;

    function initGL(canvas) {
        
        gl = WebGLUtils.setupWebGL(canvas);
        if (!gl) {
            //alert("Could not initialise WebGL, sorry :-(");
            $( "#container" ).fadeTo(400, 1.0);
            validCanvas = false;
            return;
        }
        validCanvas = true;
        //gl.viewportWidth = canvas.width;
        //gl.viewportHeight = canvas.height;
        
    }


    function getShader(gl, id) {
        var shaderScript = document.getElementById(id);
        if (!shaderScript) {
            return null;
        }

        var str = "";
        var k = shaderScript.firstChild;
        while (k) {
            if (k.nodeType === 3) {
                str += k.textContent;
            }
            k = k.nextSibling;
        }

        var shader;
        if (shaderScript.type === "x-shader/x-fragment") {
            shader = gl.createShader(gl.FRAGMENT_SHADER);
        } else if (shaderScript.type === "x-shader/x-vertex") {
            shader = gl.createShader(gl.VERTEX_SHADER);
        } else {
            return null;
        }

        gl.shaderSource(shader, str);
        gl.compileShader(shader);

        if (!gl.getShaderParameter(shader, gl.COMPILE_STATUS) && !gl.isContextLost()) {
            alert(gl.getShaderInfoLog(shader));
            return null;
        }

        return shader;
    }


    var shaderProgram;

    function initShaders() {
        var fragmentShader = getShader(gl, "shader-fs");
        var vertexShader = getShader(gl, "shader-vs");

        shaderProgram = gl.createProgram();
        gl.attachShader(shaderProgram, vertexShader);
        gl.attachShader(shaderProgram, fragmentShader);
        gl.linkProgram(shaderProgram);

        if (!gl.getProgramParameter(shaderProgram, gl.LINK_STATUS) && !gl.isContextLost()) {
            alert("Could not initialise shaders");
        }

        gl.useProgram(shaderProgram);

        shaderProgram.vertexPositionAttribute = gl.getAttribLocation(shaderProgram, "aVertexPosition");
        gl.enableVertexAttribArray(shaderProgram.vertexPositionAttribute);

        shaderProgram.vertexColorAttribute = gl.getAttribLocation(shaderProgram, "aVertexColor");
        gl.enableVertexAttribArray(shaderProgram.vertexColorAttribute);
        
        shaderProgram.vertexNormalAttribute = gl.getAttribLocation(shaderProgram, "aVertexNormal");
        gl.enableVertexAttribArray(shaderProgram.vertexNormalAttribute);
        
        shaderProgram.textureCoordAttribute = gl.getAttribLocation(shaderProgram, "aTextureCoord");
        gl.enableVertexAttribArray(shaderProgram.textureCoordAttribute);
        
        shaderProgram.textureCoordAttributeuv = gl.getAttribLocation(shaderProgram, "aTextureCoorduv");
        gl.enableVertexAttribArray(shaderProgram.textureCoordAttributeuv);
        
        shaderProgram.pMatrixUniform = gl.getUniformLocation(shaderProgram, "uPMatrix");
        shaderProgram.mvMatrixUniform = gl.getUniformLocation(shaderProgram, "uMVMatrix");
        shaderProgram.nMatrixUniform = gl.getUniformLocation(shaderProgram, "uNMatrix");
        shaderProgram.samplerUniform = gl.getUniformLocation(shaderProgram, "uSampler");
        
        shaderProgram.lightPositionUniform = gl.getUniformLocation(shaderProgram, "uLightPosition");
        shaderProgram.ambientLightColorUniform = gl.getUniformLocation(shaderProgram, "uAmbientLightColor");
        shaderProgram.diffuseLightColorUniform = gl.getUniformLocation(shaderProgram, "uDiffuseLightColor");
        shaderProgram.specularLightColorUniform = gl.getUniformLocation(shaderProgram, "uSpecularLightColor");
        
        shaderProgram.alphaUniform = gl.getUniformLocation(shaderProgram, "uAlpha");
        //shaderProgram.rAngleUniform = gl.getUniformLocation(shaderProgram, "uRAngle");
        //shaderProgram.xUminUniform = gl.getUniformLocation(shaderProgram, "xUmin");
        //shaderProgram.xVminUniform = gl.getUniformLocation(shaderProgram, "xVmin");
    }




    var mvMatrix = mat4.create();
    var mvMatrixStack = [];
    var pMatrix = mat4.create();
    

    function mvPushMatrix() {
        var copyM = mat4.create();
        mat4.copy(copyM, mvMatrix);
        mvMatrixStack.push(copyM);
    }

    function mvPopMatrix() {
        if (mvMatrixStack.length === 0) {
            throw "Invalid popMatrix!";
        }
        mvMatrix = mvMatrixStack.pop();
    }


    function setMatrixUniforms() {
        gl.uniformMatrix4fv(shaderProgram.pMatrixUniform, false, pMatrix);
        gl.uniformMatrix4fv(shaderProgram.mvMatrixUniform, false, mvMatrix);
        
        var normalMatrix = mat3.create();
        mat3.identity(normalMatrix);
        mat3.normalFromMat4(normalMatrix, mvMatrix);
        gl.uniformMatrix3fv(shaderProgram.nMatrixUniform, false, normalMatrix);
    }


    function degToRad(degrees) {
        return degrees * Math.PI / 180;
    }


    var requestId;
    var elapsedTime = 0;
    var frameCount = 0;
    var lastTime = new Date().getTime();
    
    
    var fps,fpsInterval,startTime,now,then,elapsed;
    
    
    function GameLoop() {  //Game Loop
        requestId = window.requestAnimFrame(GameLoop, canvas);
        
        //handleKeys(); //Remove
            
        /*
        var now = new Date().getTime();

        frameCount++;
        elapsedTime += (now - lastTime);

        lastTime = now;

        if(elapsedTime >= 1000) {
            fps = frameCount;
            frameCount = 0;
            elapsedTime -= 1000;

            document.getElementById('ycoord2').innerHTML = "FPS: " + fps;
        }

        lastTime = new Date().getTime();
        */

        now = Date.now();
        elapsed = now - then;

        // if enough time has elapsed, draw the next frame

        if (elapsed > fpsInterval) {

            // Get ready for next frame by setting then=now, but also adjust for your
            // specified fpsInterval not being a multiple of RAF's interval (16.7ms)
            then = now - (elapsed % fpsInterval);

            // Put your drawing code here
            SceneControllerUpdateModel();
            SceneControllerRenderScene();

        }
        
    }
    

    var startTimer;
    var validCanvas;
    var soundTrack;
    var soundEffects;
    var SoundInstanceBM;
    var initialFontSize;
    var dismisInstruction = true;
    //var testContext = true;
    
    
    function webGLStart() {
        
        if(iWinConsole){

            iConsole.game.ready().result( function( resultData ) {


                webGLStartMain();

            } );

        }

        loadAssets();
        
    }
    
    
    function webGLStartNoiWin() {
        
        webGLStartMain();
        
    }
    
    
    function webGLStartMain() {
        //document.getElementById('agentdisplay').innerHTML = agent;
        
        
        validCanvas = true;
        canvas = document.getElementById("WordCubed-canvas");
        //canvas = WebGLDebugUtils.makeLostContextSimulatingCanvas(canvas); //Remove

        canvas.addEventListener(
            "webglcontextlost", handleContextLost, false);
        canvas.addEventListener(
            "webglcontextrestored", handleContextRestored, false);

        setGameDimensions();
        
        initGL(canvas);
        
        /*
        if(testContext){
            testContext = false;
            canvas.loseContextInNCalls(1);
        }
        */
       
        lowLag.init({'urlPrefix':'sounds/'});
        lowLag.load(['Blop-Sound.mp3','Blop-Sound.wav','Blop-Sound.ogg'], "Blop");
        lowLag.load(['Star-Sound.mp3','Star-Sound.wav','Star-Sound.ogg'], "StarSound");
        
        if(validCanvas){
            gl.viewportWidth = canvas.width;
            gl.viewportHeight = canvas.height;
            
            if(!isWindowsPhone){
                initBackGroundMusic();
            }
            
            
            initShaders();
            initContext();
            
            //document.onkeydown = handleKeyDown; //Remove
            //document.onkeyup = handleKeyUp; //Remove

            if(isFireFoxDesktop){
                canvas.ondblclick = handleMouseDblClickonCanvas;
            }
            
            var tImage1 = preload.getResult("image1");
            yellowStarTexture = loadTexture(tImage1);
            var tImage2 = preload.getResult("image2");
            blueStarTexture = loadTexture(tImage2);
            var tImage3 = preload.getResult("image3");
            blackStarTexture = loadTexture(tImage3);
            var tImage4 = preload.getResult("image4");
            redStarTexture = loadTexture(tImage4);
            var tImage0 = preload.getResult("image0");
            allLettersTexture = loadTexture(tImage0);
            
            sceneControllerInit();
            
            //setGameDimensions();
            
            sceneControllerLoadScene();
            
            fpsInterval = 1000/30;
            then = Date.now();
            startTime = then;
            
            if(!isFireFoxDesktop){
                //$( "#popupTabs" ).show();
                //$( "#popupTabs" ).tabs();
                //$( "#popupTabs" ).popup("open", { positionTo: "#topAlign", transition: "pop" });
                dismisInstruction = false;
                //$( "#container" ).fadeTo(3000, 1.0);
                startTimer = setTimeout(function(){
                    
                    $( "#container" ).fadeTo(3000, 1.0);
                    if(!iWinConsole){
                        $( "#progressbar" ).fadeTo(500, 0.0, function() {
                            $('#progressbar').remove();
                        });
                    }
                    $( "#splash" ).fadeTo(500, 0.0, function() {
                        $('#splash').remove();
                    });
                    
                    GameLoop();
                }, 2000);
            }
            else{
                dismisInstruction = false;
                //$( "#container" ).fadeTo(3000, 1.0);
                startTimer = setTimeout(function(){
                    
                    $( "#container" ).fadeTo(3000, 1.0);
                    if(!iWinConsole){
                        $( "#progressbar" ).fadeTo(500, 0.0, function() {
                            $('#progressbar').remove();
                        });
                    }
                    $( "#splash" ).fadeTo(500, 0.0, function() {
                        $('#splash').remove();
                    });
                    
                    GameLoop();
                }, 2000);
            }
            
            //startTimer = setTimeout(function(){GameLoop();}, 1500);
            //$( "#popupIHelp" ).popup("open", { positionTo: "#ycoord2", transition: "pop"});
            //setTimeout(function(){$( "#popupIHelp" ).popup("close");}, 4000);
        }
        else{ // No valid context for canvas

            //setGameDimensions();
            if(!iWinConsole){
                $('#progressbar').remove();
            }
            $('#splash').remove();

        }
        
    }
    
    
    
    
    function ClosePopupHints(){
        $( "#popupHints" ).popup("close");
        PlayBloop();
    }
    
    
    function ClosePopupSettings(){
        
        if(tappedHWDCheckBox || tappedICCheckBox){
            
            tappedHWDCheckBox = false;
            tappedICCheckBox = false;
            
            ButtonNewGameSettings();
        }
        else{
            
            $( "#popupSettings" ).popup("close");
            PlayBloop();
            
            if($('#check1').prop('checked')){
                sceneController.maxWordKey = "High Word Density";
            }
            else
            {
                sceneController.maxWordKey = "Low Word Density";
            }
            if($('#check2').prop('checked')){
                sceneController.cubeColorKey = "Inverse";
            }
            else
            {
                sceneController.cubeColorKey = "Normal";
            }
            
            setTimeout(function(){
                document.getElementById('placeCheck1').innerHTML = "";
                document.getElementById('placeCheck2').innerHTML = "";
                document.getElementById('placeCheck3').innerHTML = "";
                document.getElementById('placeCheck4').innerHTML = "";
            }, 100);
            
        }
        
    }
    
    
    function ClosePopupTabs(){
        
        if(dismisInstruction){
            dismisInstruction = false;
            $( "#container" ).fadeTo(3000, 1.0);
            startTimer = setTimeout(function(){GameLoop();}, 500);
            
            if(!isFireFoxDesktop){
                $( "#popupTabs" ).popup("close", {transition: "pop"});
            }
            
        }
        
        $( "#popupTabs" ).popup("close");
        PlayBloop();
    }
    
    function ClosePopupBasic(){
        $( "#popupBasic" ).popup("close");
        PlayBloop();
    }
    
    function ClosePopupWin(){
        $( "#popupWin" ).popup("close");
        PlayBloop();
    }
    
    
    function PlayBloop(){

        if(soundEffects){
            lowLag.play("Blop");
        }

    };
    
    
    var preload;
    var getMeter1;
    var addToMeter;
    function loadAssets(){
        
        getMeter1 = document.getElementById('meter1');
        getMeter1.style.width = "0%";
        addToMeter = 0;
        if(iWinConsole){
            $('#progressbar').remove();
        }
        
        var manifest = [
            {src:"LettersTA1024x1024.png", id:"image0"},
            {src:"particle-yellow12-atlas.png", id:"image1"},
            {src:"particle-blue12-atlas.png", id:"image2"},
            {src:"particle-black12-atlas.png", id:"image3"},
            {src:"particle-red12-atlas.png", id:"image4"},
            {src:"hint2.png", id:"hint2"},
            {src:"settings2.png", id:"settings2"},
            {src:"games2.png", id:"games2"},
            {src:"instructions2.png", id:"instructions2"},
            {src:"blueStar40x40.png", id:"blueStar"},
            {src:"redStar40x40.png", id:"redStar"},
            {src:"yellowStar40x40.png", id:"yellowStar"},
            {src:"blueStar40x40.png", id:"blueStar2"},
            {src:"redStar40x40.png", id:"redStar2"},
            {src:"yellowStar40x40.png", id:"yellowStar2"},
            {src:"blueStar40x40.png", id:"blueStar3"},
            {src:"redStar40x40.png", id:"redStar3"},
            {src:"yellowStar40x40.png", id:"yellowStar3"},
            {src:"WordCubedLogo-1024.png", id:"WordCubedLogo"}
        ];
        
        
        preload = new createjs.LoadQueue(true, "images/");
        
        

        // Use this instead to use tag loading
        //preload = new createjs.PreloadJS(false);

        //preload.on("progress", handleProgress);
        preload.on("complete", handleComplete);
        preload.on("fileload", handleFileLoad);
        preload.loadManifest(manifest);
        
        
    };
    
    
    function handleComplete(event) {
        
        loadAssets2();
    }
    
    
    var preload2;
    // Monthly List
    function loadAssets2(){
        
        var manifest2 = [
            {src:"MonthlyIput.txt", id:"list0"},
            {src:"gameStrings.json", id:"gStrings"}
        ];
        
        preload2 = new createjs.LoadQueue(true, "wordlists/");
        
        //preload.on("progress", handleProgress);
        preload2.on("complete", handleComplete2);
        preload2.on("fileload", handleFileLoad);
        preload2.loadManifest(manifest2);
        
    };
    
    function handleComplete2(event) {
        
        loadAssets3();
    }
    
    
    var preload3;
    var weeklyWordLists = new Array();
    var weeklyLists;
    
    // All Word Lists
    function loadAssets3(){
        
        readGameStrings = preload2.getResult("gStrings");
        
        wordListString = preload2.getResult("list0");
        weeklyLists = wordListString.split("\n");
        var gameDate = getTodaysDate();

        for(var i = 0; i < weeklyLists.length; i=i+3){
            var tableElement = new TableRowObject();
            tableElement.init();
            tableElement.date = weeklyLists[i];
            tableElement.cubeSize = weeklyLists[i+1];
            tableElement.wordList = weeklyLists[i+2];
            weeklyWordLists.push(tableElement);
        }

        // get current date plus last 12 days of puzzles
        for(var i = weeklyWordLists.length - 1; i >= 0; i=i-1){
            var checkGame = weeklyWordLists[i];
            if(checkGame.date === gameDate){

                break;
            }
            else
            {
                weeklyWordLists.pop();
            }
        }
        if(weeklyWordLists.length > 12){
            var rCount = weeklyWordLists.length - 12;
            for(var i = 0; i < rCount; i++){
                weeklyWordLists.splice(0,1);
            }
        }
        var tempRowArray = new Array();
        var tLength = weeklyWordLists.length;
        for(var i = 0; i < tLength; i++){
            var tempE = weeklyWordLists.pop();
            tempRowArray.push(tempE);
        }
        weeklyWordLists = tempRowArray;
        
        if(weeklyWordLists.length === 0){
            var tableElement = new TableRowObject();
            tableElement.init();
            tableElement.date = "Fruit  1";
            tableElement.cubeSize = "4x4";
            tableElement.wordList = "Fruit.txt";
            weeklyWordLists.push(tableElement);
            var tableElement2 = new TableRowObject();
            tableElement2.init();
            tableElement2.date = "Fruit  2";
            tableElement2.cubeSize = "5x5";
            tableElement2.wordList = "Fruit.txt";
            weeklyWordLists.push(tableElement2);
            var tableElement3 = new TableRowObject();
            tableElement3.init();
            tableElement3.date = "Fruit  3";
            tableElement3.cubeSize = "6x6";
            tableElement3.wordList = "Fruit.txt";
            weeklyWordLists.push(tableElement3);
        }
        
        var manifest3 = new Array();
        for(var i = 0; i < weeklyWordLists.length; i++){
            var tempE = weeklyWordLists[i];
            var tempM = {
                src: tempE.wordList,
                id: tempE.wordList
            };
            
            manifest3.push(tempM);
        }
        
        //var manifest3 = [
            //{src:"MonthlyIput.txt", id:"list0"}
        //];
        
        preload3 = new createjs.LoadQueue(true, "wordlists/");
        
        //preload.on("progress", handleProgress);
        preload3.on("complete", handleComplete3);
        preload3.on("fileload", handleFileLoad);
        preload3.loadManifest(manifest3);
        
    };
    
    function handleComplete3(event) {
        
        getMeter1.style.width = "100%";
        
        if(iWinConsole){
            iConsole.game.loadProgress( { progress: 1, file: '' } );

            iConsole.game.loaded( {
               success: true
            } );
        }
        else{

            webGLStartNoiWin();

        }
        
    }
    
    
    function handleFileLoad(event) {
        
        if(!iWinConsole){
            addToMeter = addToMeter + 3;
            getMeter1.style.width = addToMeter + "%";
        }
        
    }
    
    
    function getTodaysDate(){
    
        var today = new Date();
        var dd = today.getDate();
        var mm = today.getMonth()+1; //January is 0!
        var yyyy = today.getFullYear();

        if(dd<10) {
            dd='0'+dd;
        } 

        if(mm<10) {
            mm='0'+mm;
        } 

        yyyy = '/'+yyyy;
        yyyy = yyyy.substr(3,2);

        today = mm+'/'+dd+'/'+yyyy;

        return today;
    }
    
    
    function initBackGroundMusic(){
        
        // if initializeDefaultPlugins returns false, we cannot play sound in this browser
        if (!createjs.Sound.initializeDefaultPlugins()) {return;}

        var audioPath = "sounds/";
        var manifest = [
            {id:"BackGroundMusic", src:"WordCubedMelody.mp3"}
        ];

        //createjs.Sound.alternateExtensions = ["ogg"];
        createjs.Sound.addEventListener("fileload", handleLoad);
        createjs.Sound.registerManifest(manifest, audioPath);
        
    };
    
    
    function handleLoad(event) {
        
        SoundInstanceBM = createjs.Sound.createInstance("BackGroundMusic");
        
        SoundInstanceBM.play({loop:-1});
        if(typeof(Storage)!=="undefined")
        {
            soundTrack = localStorage.getItem("tMusic");
            if(soundTrack === "false"){
                soundTrack = false;
                SoundInstanceBM.pause();
            }
            else{
                soundTrack = true;

            }

        }
        
    }
    
    
    
    $(function() {
        FastClick.attach(document.body);
    });
    
    
    
    $(window).on("orientationchange",function(event){
        
        alert("The orientation has changed to: " + event.orientation);
        
    });
    
    
    
    
    $(document).ready(function(){
        
        $("*").dblclick(function(e){
            e.preventDefault();
        });
    });

    
    
    $(document).bind(
        'touchmove', function(e) {
            e.preventDefault();
        }
    );
    
    
    
    $(document).on(
        "touchmove", function(e){
            
            if(iHelpOpen){
                $( "#popupIHelp" ).popup("close");
                iHelpOpen = undefined;
            }
            
    });
    
   
   $(function() {
        $( "#container" ).on({
            "touchend mouseup" : function(e){ 
                
                if(iHelp){
                    
                    document.getElementById('header4').innerHTML = readGameStrings.header4;
                    
                    iHelp = false;
                    iHelpOpen = $( "#popupIHelp" ).popup("open", { positionTo: "#ycoord2", transition: "pop"});
                    //setTimeout(function(){$( "#popupIHelp" ).popup("close", { transition: "pop"});}, 3000);

                    //if(isSafariDesktop && iWinConsole){
                        //$( "#popupIHelp" ).popup("close");
                    //}
                }
                
            }
        });
    });
   
   
    
    
    $(function() {
        $( document ).tooltip();
    });
    
    
    
    function tapHintsButton(){
        
        if(validCanvas){
            
            document.getElementById('header1').innerHTML = readGameStrings.header1;
            document.getElementById('showHint').innerHTML = readGameStrings.showHint;
            document.getElementById('solveTheCube').innerHTML = readGameStrings.solveTheCube;
            document.getElementById('closepopup2').innerHTML = readGameStrings.closepopup2;
            
            PlayBloop();

            $( "#popupHints" ).popup("open", { positionTo: "#topHeader",
                                               transition: "pop"

            });
        }
        
    }
    
    
    function tapSettingsButton(){
        
        if(validCanvas){
            
            
            
            PlayBloop();

            
            //$( "#placeCheck1" ).empty();
            //$( "#placeCheck2" ).empty();
            //$( "#placeCheck3" ).empty();
            //$( "#placeCheck4" ).empty();
            document.getElementById('placeCheck1').innerHTML = "";
            document.getElementById('placeCheck2').innerHTML = "";
            document.getElementById('placeCheck3').innerHTML = "";
            document.getElementById('placeCheck4').innerHTML = "";

            if(sceneController.maxWordKey === "High Word Density"){
                //document.getElementById('placeCheck1').innerHTML = "<input type=\"checkbox\" onclick=\"ToggleDensity();\" id=\"check1\" checked><label id=\"check1id\" for=\"check1\">High Word Density</label>";
                $( "#placeCheck1" ).append( "<input type=\"checkbox\" onclick=\"ToggleDensity();\" id=\"check1\" checked><label id=\"check1id\" for=\"check1\">High Word Density</label>" );
            }
            else{
                //document.getElementById('placeCheck1').innerHTML = "<input type=\"checkbox\" onclick=\"ToggleDensity();\" id=\"check1\"><label id=\"check1id\" for=\"check1\">High Word Density</label>";
                $( "#placeCheck1" ).append( "<input type=\"checkbox\" onclick=\"ToggleDensity();\" id=\"check1\"><label id=\"check1id\" for=\"check1\">High Word Density</label>" );
            }

            if(sceneController.cubeColorKey === "Inverse"){
                $( "#placeCheck2" ).append( "<input type=\"checkbox\" onclick=\"ToggleInverse();\" id=\"check2\" checked><label id=\"check2id\" for=\"check2\">Inverse Colors</label>" );
            }
            else{
                $( "#placeCheck2" ).append( "<input type=\"checkbox\" onclick=\"ToggleInverse();\" id=\"check2\"><label id=\"check2id\" for=\"check2\">Inverse Colors</label>" );
            }

            if(soundTrack === true){
                $( "#placeCheck3" ).append( "<input type=\"checkbox\" onclick=\"ToggleMusic();\" id=\"check3\" checked><label id=\"check3id\" for=\"check3\">Background Music</label>" );
            }
            else{
                $( "#placeCheck3" ).append( "<input type=\"checkbox\" onclick=\"ToggleMusic();\" id=\"check3\"><label id=\"check3id\" for=\"check3\">Background Music</label>" );
            }

            if(soundEffects === true){
                $( "#placeCheck4" ).append( "<input type=\"checkbox\" onclick=\"ToggleSound();\" id=\"check4\" checked><label id=\"check4id\" for=\"check4\">Sounds</label>" );
            }
            else{
                $( "#placeCheck4" ).append( "<input type=\"checkbox\" onclick=\"ToggleSound();\" id=\"check4\"><label id=\"check4id\" for=\"check4\">Sounds</label>" );
            }

            gPopup = document.getElementById('check3id');
            gPopup.style.fontSize = parseFloat(Math.round(28 * tempScale * 100) / 100).toFixed(0) + "px";
            gPopup = document.getElementById('check4id');
            gPopup.style.fontSize = parseFloat(Math.round(28 * tempScale * 100) / 100).toFixed(0) + "px";
            gPopup = document.getElementById('check1id');
            gPopup.style.fontSize = parseFloat(Math.round(28 * tempScale * 100) / 100).toFixed(0) + "px";
            gPopup = document.getElementById('check2id');
            gPopup.style.fontSize = parseFloat(Math.round(28 * tempScale * 100) / 100).toFixed(0) + "px";
            
            document.getElementById('header2').innerHTML = readGameStrings.header2;
            document.getElementById('check1id').innerHTML = readGameStrings.check1id;
            document.getElementById('check2id').innerHTML = readGameStrings.check2id;
            document.getElementById('check3id').innerHTML = readGameStrings.check3id;
            document.getElementById('check4id').innerHTML = readGameStrings.check4id;
            document.getElementById('buttonNewGame').innerHTML = readGameStrings.buttonNewGame;
            document.getElementById('closepopup3').innerHTML = readGameStrings.closepopup3;
            
            $( "#popupSettings" ).popup("open", { positionTo: "#topHeader",
                                            transition: "pop" 

            });


            $(function(){
                $("#check1id").on( "tap", function( event ){

                  console.log('Tapped Check Box High Word Density');
                  tappedHWDCheckBox = !tappedHWDCheckBox;

                });      
            });

            $(function(){
                $("#check1").on( "tap", function( event ){

                  console.log('Tapped Check Box High Word Density');
                  tappedHWDCheckBox = !tappedHWDCheckBox;

                });      
            });

            $(function(){
                $("#check2id").on( "tap", function( event ){

                  console.log('Tapped Check Box Inverse Colors');
                  tappedICCheckBox = !tappedICCheckBox;

                });      
            });

            $(function(){
                $("#check2").on( "tap", function( event ){

                  console.log('Tapped Check Box Inverse Colors');
                  tappedICCheckBox = !tappedICCheckBox;

                });      
            });
                
        }
        
    }
    
    
    function tapGamesButton(){
        
        if(validCanvas){
                
            PlayBloop();

            ShowAllGames();

        }
        
    }
    
    
    function ShowAllGames(){
        
        if(validCanvas){
            
            document.getElementById('popupHeader41').innerHTML = readGameStrings.popupHeader41;
            document.getElementById('popupHeader42').innerHTML = readGameStrings.popupHeader42;
            document.getElementById('popupHeader43').innerHTML = readGameStrings.popupHeader43;
            document.getElementById('popupHeader44').innerHTML = readGameStrings.popupHeader44;
            document.getElementById('popupHeader45').innerHTML = readGameStrings.popupHeader45;
            
            
            var tFontSize = parseFloat(Math.round(20 * tempScale * 100) / 100).toFixed(0) + "px";

            //$( "#users tbody" ).empty();
            document.getElementById('usersTBody').innerHTML = "";
            
            for(var i = 0; i < weeklyWordLists.length; i++){
                var tElement = weeklyWordLists[i];
                if(tElement.date === sceneController.currentGame){
                   $( "#users tbody" ).append( "<tr style=\"background: #ffccff\">" +
                    "<td style=\"font-size:" + tFontSize + "\">" + tElement.date + "</td>" +
                    "<td style=\"font-size:" + tFontSize + "\">" + tElement.cubeSize + "</td>" +
                    "<td style=\"font-size:" + tFontSize + "\">" + tElement.highScore + "</td>" +
                    "<td style=\"font-size:" + tFontSize + "\">" + tElement.scoreRate + "</td>" +
                    "</tr>" );
                }
                else{
                    $( "#users tbody" ).append( "<tr>" +
                    "<td style=\"font-size:" + tFontSize + "\">" + tElement.date + "</td>" +
                    "<td style=\"font-size:" + tFontSize + "\">" + tElement.cubeSize + "</td>" +
                    "<td style=\"font-size:" + tFontSize + "\">" + tElement.highScore + "</td>" +
                    "<td style=\"font-size:" + tFontSize + "\">" + tElement.scoreRate + "</td>" +
                    "</tr>" );
                }

            }


            if(sceneController.currentGame !== null){

                $( "#popupGames" ).popup("open", { positionTo: "#topAlign",
                                                  transition: "pop" 

                });
            }



            $(function(){
                $("#usersTBody tr").on( "tap", function( event ){
                  //$( event.target ).addClass( "tap" );
                        var listChanged;
                        var selectedList = $( this ).text();
                        selectedList = selectedList.substring(0, 8);

                        PlayBloop();

                        $( this ).css("background-color", "#cccccc");


                        if(!(sceneController.currentGame === selectedList)){
                            listChanged = true;
                            
                        }
                        else {
                            
                            listChanged = false;
                        }


                        if(!(sceneController.currentGame === selectedList)){
                            for(var i = 0; i < weeklyWordLists.length; i++){
                                var tElement = weeklyWordLists[i];
                                if(tElement.date === selectedList){

                                    if (tElement.cubeSize === "4x4"){
                                        sceneController.preCubeSize = 96;
                                    }
                                    else if (tElement.cubeSize === "5x5"){
                                        sceneController.preCubeSize = 150;
                                    }
                                    else if (tElement.cubeSize === "6x6"){
                                        sceneController.preCubeSize = 216;
                                    }
                                    //sceneController.wordListPlay = "wordlists/" + tElement.wordList;
                                    sceneController.wordListPlay = tElement.wordList;
                                    sceneController.currentGame = tElement.date;
                                    break;
                                }
                            }
                            
                            
                            setTimeout(function(){

                                $( "#popupGames" ).popup( "close" );

                                if(iWinConsole){

                                    iConsole.ads.show( {
                                        type: 'interstitial'
                                    } ).result( function( resultData ) {
                                        sceneController.endAnimationActive = true;
                                    } );

                                }
                                else{
                                    sceneController.endAnimationActive = true;
                                }
                                
                                setTimeout(function(){
                                    document.getElementById('usersTBody').innerHTML = "";
                                }, 100);
                                
                                
                            }, 300);

                        }
                        else{
                            setTimeout(function(){$( "#popupGames" ).popup( "close" );
                                
                                setTimeout(function(){
                                    document.getElementById('usersTBody').innerHTML = "";
                                }, 100);
                                
                            }, 300);
                        }


                  });

            });


        }
        
    }
    
    
    function ShowAllGamesClose(){
        
        ClosePopupWin();
        setTimeout(function(){ShowAllGames();}, 500);
        
        
    }
    
    
    function tapInfoButton(){
        
        document.getElementById('popupHeader51').innerHTML = readGameStrings.popupHeader51;
        document.getElementById('popupHeader52').innerHTML = readGameStrings.popupHeader52;
        document.getElementById('popupHeader53').innerHTML = readGameStrings.popupHeader53;
        document.getElementById('popupHeader54').innerHTML = readGameStrings.popupHeader54;
        document.getElementById('closepopup5').innerHTML = readGameStrings.closepopup5;
        
        
        document.getElementById('tabs-1x').innerHTML = "";
        var gBlueStarImage = preload.getResult("blueStar3");
        gBlueStarImage.id = "image54";
        gBlueStarImage.alt= "Blue";
        var gRedStarImage = preload.getResult("redStar3");
        gRedStarImage.id = "image55";
        gRedStarImage.alt= "Red";
        var gYellowStarImage = preload.getResult("yellowStar3");
        gYellowStarImage.id = "image56";
        gYellowStarImage.alt= "Yellow";
        document.getElementById('tabs-1x').appendChild(document.createTextNode(readGameStrings.tab11));
        document.getElementById('tabs-1x').appendChild(gBlueStarImage);
        document.getElementById('tabs-1x').appendChild(gRedStarImage);
        document.getElementById('tabs-1x').appendChild(gYellowStarImage);
        document.getElementById('tabs-1x').appendChild(document.createTextNode(readGameStrings.tab12));
        
        document.getElementById('tabs-2x').innerHTML = "";
        var hgBlueStarImage2 = preload.getResult("blueStar2");
        hgBlueStarImage2.id = "image51";
        hgBlueStarImage2.alt= "Blue";
        var hgRedStarImage2 = preload.getResult("redStar2");
        hgRedStarImage2.id = "image52";
        hgRedStarImage2.alt= "Red";
        var hgYellowStarImage2 = preload.getResult("yellowStar2");
        hgYellowStarImage2.id = "image53";
        hgYellowStarImage2.alt= "Yellow";
        document.getElementById('tabs-2x').appendChild(document.createTextNode(readGameStrings.tab21));
        document.getElementById('tabs-2x').appendChild(hgBlueStarImage2);
        document.getElementById('tabs-2x').appendChild(hgRedStarImage2);
        document.getElementById('tabs-2x').appendChild(hgYellowStarImage2);
        document.getElementById('tabs-2x').appendChild(document.createTextNode(readGameStrings.tab22));
        
        document.getElementById('tabs-3x').innerHTML = readGameStrings.tab3;
        
        
        if(iWinConsole){
            document.getElementById('tabs-1w').innerHTML = "Copyright &copy; 2014 JWACK APPS<br>All rights reserved.<br>";
            document.getElementById('tabs-2w').innerHTML = "Questions, comments, and issues may be directed to <a href=\"mailto:support@iwin.com?Subject=Word%20Cubed%20Weekly\" target=\"_top\">support@iwin.com</a>";
        }
        else{
            document.getElementById('tabs-1w').innerHTML = "Copyright &copy; 2014 <a href=\"http://jwackapps.com\"  target=\"_blank\">JWACK APPS</a><br>All rights reserved.<br>";
            document.getElementById('tabs-2w').innerHTML = "Questions, comments, and issues may be directed to <a href=\"mailto:wordheader@gmail.com?Subject=Word%20Cubed%20Weekly\" target=\"_top\">wordheader@gmail.com</a>";
        }
        
        document.getElementById('tabs-3w').innerHTML = "";
        var gLogoImage = preload.getResult("WordCubedLogo");
        gLogoImage.id = "image60";
        gLogoImage.alt = "Word Cubed Weekly";
        gLogoImage.width = "500";
        gLogoImage.height = "375";
        document.getElementById('tabs-3w').appendChild(gLogoImage);
        //<img id="image60" alt="Word Cubed Weekly" src="images/WordCubedLogo-1024.png" width="512" height="384">
        
        gPopup = document.getElementById('image51');
        gPopup.style.width = (30 * tempScale) + "px";
        gPopup.style.height = (30 * tempScale) + "px";
        gPopup = document.getElementById('image52');
        gPopup.style.width = (30 * tempScale) + "px";
        gPopup.style.height = (30 * tempScale) + "px";
        gPopup = document.getElementById('image53');
        gPopup.style.width = (30 * tempScale) + "px";
        gPopup.style.height = (30 * tempScale) + "px";
        gPopup = document.getElementById('image54');
        gPopup.style.width = (30 * tempScale) + "px";
        gPopup.style.height = (30 * tempScale) + "px";
        gPopup = document.getElementById('image55');
        gPopup.style.width = (30 * tempScale) + "px";
        gPopup.style.height = (30 * tempScale) + "px";
        gPopup = document.getElementById('image56');
        gPopup.style.width = (30 * tempScale) + "px";
        gPopup.style.height = (30 * tempScale) + "px";
        gPopup = document.getElementById('image60');
        gPopup.style.width = (500 * tempScale) + "px";
        gPopup.style.height = (375 * tempScale) + "px";
        
        
        
        iHelp = false;
        PlayBloop();

        $("#popupTabs").show();
        $("#popupTabs").tabs();

        $( "#popupTabs" ).popup("open", { positionTo: "#topAlign",
                                              transition: "pop" 

        });
        
    }
    
    
    
    $(function(){
        $( "#bottomFooter" ).bind( "tap", function( event ){
          $( event.target ).addClass( "tap" );
          
          if(validCanvas){
            
            document.getElementById('closepopup1').innerHTML = readGameStrings.closepopup1;
            
            PlayBloop();
              
            document.getElementById('wordboxpopup').innerHTML = tempWdX.innerHTML;
            $( "#popupBasic" ).popup("open", { positionTo: "#container", transition: "pop" });
            
          }
          
        });
    });
    
    var testFrame = true;
    $(function(){
        $( "#starbox" ).bind( "tap", function( event ){
          $( event.target ).addClass( "tap" );
          
            if(validCanvas){
                
                document.getElementById('closepopup1').innerHTML = readGameStrings.closepopup1;
                
                PlayBloop();

                document.getElementById('wordboxpopup').innerHTML = tempWdX.innerHTML;
                $( "#popupBasic" ).popup("open", { positionTo: "#container", transition: "pop" });
                
               
               /*
               if(testFrame){
                   testFrame = false;
                   window.cancelAnimFrame(requestId);
                   requestId = undefined;
               }
               else{
                   testFrame = true;
                   GameLoop();
               }
               */
               
            }
          
        });
    });
    
   
    
   
   
    $(function(){
        
        $( "#container" ).on( "vmousedown vmousemove vmouseup vmouseout doubletap", function( event ){ 
       
            if(validCanvas){


                if (event.type === "vmousedown") {  //"vmousedown"

                    handleMouseDownonCanvas(event);

                } else if (event.type === "vmousemove") {  //"vmousemove"

                    handleMouseMoveonCanvas(event);

                } else if (event.type === "vmouseup") {  //"vmouseup"

                    handleMouseUponCanvas(event);

                } else if (event.type === "vmouseout") {

                    handleMouseOutonCanvas(event);

                } else if (event.type === "doubletap") {

                    if(!isFireFoxDesktop){
                        handleMouseDblClickonCanvas(event);
                    }
                }

            }
        
        });
        
        
    });
    
    
    /*
    $(function(){

        $( "#container" ).on( "doubletap", function( event ){  

            if(validCanvas){
                
                if (event.type === "doubletap") {

                    handleMouseDblClickonCanvas(event);

                }
                
            }

        });

    });
    */
   
   
   
   
    function handleContextLost(event) {
        
        //document.getElementById('contextStatus').innerHTML = "Context";
        
        event.preventDefault();
        
        if(requestId){
            //cancelRequestAnimationFrame(requestId);
            
            window.cancelAnimFrame(requestId);
            requestId = undefined;
        }
        
    }

    
    function handleContextRestored(event) {
        
        //document.getElementById('contextStatus').innerHTML = "Restore";
        
        if(validCanvas){
            
            initShaders();
            initContext();
            
            //document.onkeydown = handleKeyDown;
            //document.onkeyup = handleKeyUp;
            
            if(isFireFoxDesktop){
                canvas.ondblclick = handleMouseDblClickonCanvas;
            }
            
            var tImage1 = preload.getResult("image1");
            yellowStarTexture = loadTexture(tImage1);

            var tImage2 = preload.getResult("image2");
            blueStarTexture = loadTexture(tImage2);

            var tImage3 = preload.getResult("image3");
            blackStarTexture = loadTexture(tImage3);

            var tImage4 = preload.getResult("image4");
            redStarTexture = loadTexture(tImage4);

            var tImage0 = preload.getResult("image0");
            allLettersTexture = loadTexture(tImage0);
            
            if (particleEmitterYellow){
                particleEmitterYellow.setParticleX(yellowStarTexture);
                particleEmitterRed.setParticleX(redStarTexture);
                particleEmitterBlue.setParticleX(blueStarTexture);
                particleEmitterBlack.setParticleX(blackStarTexture);
                
                GameLoop();
            }
            else{
                
                webGLStartMain();
            }
            
        }
        
    }
    
    function loadTexture(str) {

        var newTexture = gl.createTexture();
        //newTexture.image = new Image();
        newTexture.image = str;

        //newTexture.image.onload = function() {
            handleLoadedTexture(newTexture);
        //};

        //newTexture.image.src = str;

        return newTexture;
    }


    function handleLoadedTexture(texture) {


        gl.bindTexture(gl.TEXTURE_2D, texture);
        gl.pixelStorei(gl.UNPACK_FLIP_Y_WEBGL, true);
        gl.texImage2D(gl.TEXTURE_2D, 0, gl.RGBA, gl.RGBA, gl.UNSIGNED_BYTE, texture.image);
        gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MAG_FILTER, gl.LINEAR);
        gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MIN_FILTER, gl.LINEAR_MIPMAP_NEAREST);
        gl.generateMipmap(gl.TEXTURE_2D);

        gl.bindTexture(gl.TEXTURE_2D, null);

    }
    
    /*
    // Remove
    function handleKeys() {
        if (currentlyPressedKeys[33]) {
          // Page Up
          canvas.loseContext();
          canvas.setRestoreTimeout(-1);
        }
        if (currentlyPressedKeys[34]) {
          // Page Down
          canvas.restoreContext();
        }
        
    }
    */
   
   
   var tempWd;
   var tempWdX;
   var gPopup;
   var gOldImage;
   
   function setGameDimensions(){
       
       
        browserWidth=window.innerWidth || document.documentElement.clientWidth || document.body.clientWidth;
        browserHeight=window.innerHeight || document.documentElement.clientHeight || document.body.clientHeight;
        //document.getElementById('xcoord').innerHTML = "W: " + browserWidth;
        //document.getElementById('xcoord2').innerHTML = "H: " + browserHeight;

        tempScaleW = browserWidth / 640;
        tempScaleH = browserHeight / 842;
        if(tempScaleH < tempScaleW){
            tempScale = tempScaleH;
        }
        else {
            tempScale = tempScaleW;
        }
        cWidth = 640 * tempScale;
        cWidth = parseFloat(Math.round(cWidth * 100) / 100).toFixed(0);
        

        var mvcontent = document.getElementById('WordCubed-canvas');
        if(validCanvas){
            if(tempScale > 1){
                mvcontent.setAttribute('width',cWidth);
                mvcontent.setAttribute('height',cWidth);
            }
            else{
                mvcontent.setAttribute('width',640);
                mvcontent.setAttribute('height',640);
            }
            mvcontent.style.width = cWidth + "px";
            mvcontent.style.height = cWidth + "px";
            
            //gl.viewportWidth = canvas.width;
            //gl.viewportHeight = canvas.height;
        }
        initialFontSize = parseFloat(Math.round(28 * tempScale * 100) / 100).toFixed(0) + "px";
        
        //document.getElementById('ycoord').innerHTML = "S: " + parseFloat(Math.round(tempScale * 100) / 100).toFixed(2);
        //document.getElementById('ycoord2').innerHTML = "C: " + cWidth;
        

        var gContainer = document.getElementById('container');
        gContainer.style.width = cWidth + "px";
        gContainer.style.height = cWidth + "px";
        
        
        var gTopHeader = document.getElementById('topHeader');
        gTopHeader.style.width = cWidth + "px";
        
        
        //<img id = "imghints" alt="Hints" src="images/hint2.png" title=" Hints ">
        var gButtonImage = preload.getResult("hint2");
        gButtonImage.id = "imghints";
        gButtonImage.alt = "Hints";
        gButtonImage.title = " Hints ";
        gButtonImage.width = (60 * tempScale);
        gButtonImage.height = (60 * tempScale);
        var gButton = document.getElementById('btnhints');
        gButton.style.width = (86 * tempScale) + "px";
        gButton.style.height = (86 * tempScale) + "px";
        gButton.appendChild(gButtonImage);
        
        
        //<img id = "imgsettings" alt="Settings" src="images/settings2.png" title=" Settings ">
        gButtonImage = preload.getResult("settings2");
        gButtonImage.id = "imgsettings";
        gButtonImage.alt = "Settings";
        gButtonImage.title = " Settings ";
        gButtonImage.width = (60 * tempScale);
        gButtonImage.height = (60 * tempScale);
        gButton = document.getElementById('btnsettings');
        gButton.style.width = (86 * tempScale) + "px";
        gButton.style.height = (86 * tempScale) + "px";
        gButton.appendChild(gButtonImage);
        
        
        //<img id = "imggames" alt="Games" src="images/games2.png" title=" Games ">
        gButtonImage = preload.getResult("games2");
        gButtonImage.id = "imggames";
        gButtonImage.alt = "Games";
        gButtonImage.title = " Games ";
        gButtonImage.width = (60 * tempScale);
        gButtonImage.height = (60 * tempScale);
        gButton = document.getElementById('btngames');
        gButton.style.width = (86 * tempScale) + "px";
        gButton.style.height = (86 * tempScale) + "px";
        gButton.appendChild(gButtonImage);
        
        
        //<img id = "imginfo" alt="Info" src="images/instructions2.png" title=" Info ">
        gButtonImage = preload.getResult("instructions2");
        gButtonImage.id = "imginfo";
        gButtonImage.alt = "Info";
        gButtonImage.title = " Info ";
        gButtonImage.width = (60 * tempScale);
        gButtonImage.height = (60 * tempScale);
        gButton = document.getElementById('btninfo');
        gButton.style.width = (86 * tempScale) + "px";
        gButton.style.height = (86 * tempScale) + "px";
        gButton.appendChild(gButtonImage);
        
        
        //<img id="starimage" src="images/blueStar40x40.png" alt="Blue" title=" 3 Stars/Letter ">
        gButtonImage = preload.getResult("blueStar");
        gButtonImage.id = "starimage";
        gButtonImage.alt = "Blue";
        gButtonImage.title = " 3 Stars/Letter ";
        gButton = document.getElementById('starbox');
        gButton.appendChild(gButtonImage);
        gOldImage = gButtonImage;
        gButton = document.getElementById('starimage');
        gButton.style.width = (50 * tempScale) + "px";
        gButton.style.height = (50 * tempScale) + "px";
        
        
        
        
        gButton = document.getElementById('scoreratebox');
        gButton.style.fontSize = parseFloat(Math.round(32 * tempScale * 100) / 100).toFixed(0) + "px";
        
        gButton = document.getElementById('scorebox');
        gButton.style.fontSize = parseFloat(Math.round(32 * tempScale * 100) / 100).toFixed(0) + "px";
        
        var theightLeft = browserHeight - (86 * tempScale) - cWidth - parseFloat(Math.round(32 * tempScale * 100) / 100).toFixed(0);
        var gBottomFooter = document.getElementById('bottomFooter');
        gBottomFooter.style.width = (cWidth - 10) + "px";
        gBottomFooter.style.fontSize = parseFloat(Math.round(32 * tempScale * 100) / 100).toFixed(0) + "px";
        gBottomFooter.style.height = theightLeft + "px"; //"auto"; //(85 * tempScale) + "px";
        
        
        
        gPopup = document.getElementById('popupBasic');
        gPopup.style.maxWidth = (600 * tempScale) + "px";
        gPopup.style.fontSize = parseFloat(Math.round(32 * tempScale * 100) / 100).toFixed(0) + "px";
        gPopup = document.getElementById('closepopup1');
        gPopup.style.fontSize = parseFloat(Math.round(22 * tempScale * 100) / 100).toFixed(0) + "px";
        
        
        gPopup = document.getElementById('popupHints');
        gPopup.style.maxWidth = (500 * tempScale) + "px";
        gPopup.style.width = (500 * tempScale) + "px";
        gPopup = document.getElementById('closepopup2');
        gPopup.style.fontSize = parseFloat(Math.round(22 * tempScale * 100) / 100).toFixed(0) + "px";
        gPopup = document.getElementById('popupHeader2');
        gPopup.style.fontSize = parseFloat(Math.round(32 * tempScale * 100) / 100).toFixed(0) + "px";
        gPopup = document.getElementById('showHint');
        gPopup.style.fontSize = parseFloat(Math.round(28 * tempScale * 100) / 100).toFixed(0) + "px";
        gPopup = document.getElementById('solveTheCube');
        gPopup.style.fontSize = parseFloat(Math.round(28 * tempScale * 100) / 100).toFixed(0) + "px";
        
        
        
        gPopup = document.getElementById('popupSettings');
        gPopup.style.maxWidth = (500 * tempScale) + "px";
        gPopup.style.width = (500 * tempScale) + "px";
        gPopup = document.getElementById('closepopup3');
        gPopup.style.fontSize = parseFloat(Math.round(22 * tempScale * 100) / 100).toFixed(0) + "px";
        gPopup = document.getElementById('popupHeader3');
        gPopup.style.fontSize = parseFloat(Math.round(32 * tempScale * 100) / 100).toFixed(0) + "px";
        gPopup = document.getElementById('check3id');
        gPopup.style.fontSize = parseFloat(Math.round(28 * tempScale * 100) / 100).toFixed(0) + "px";
        gPopup = document.getElementById('check4id');
        gPopup.style.fontSize = parseFloat(Math.round(28 * tempScale * 100) / 100).toFixed(0) + "px";
        gPopup = document.getElementById('check1id');
        gPopup.style.fontSize = parseFloat(Math.round(28 * tempScale * 100) / 100).toFixed(0) + "px";
        gPopup = document.getElementById('check2id');
        gPopup.style.fontSize = parseFloat(Math.round(28 * tempScale * 100) / 100).toFixed(0) + "px";
        gPopup = document.getElementById('buttonNewGame');
        gPopup.style.fontSize = parseFloat(Math.round(28 * tempScale * 100) / 100).toFixed(0) + "px";
        
        
        
        gPopup = document.getElementById('placeCheck3');
        gPopup.style.fontSize = parseFloat(Math.round(28 * tempScale * 100) / 100).toFixed(0) + "px";
        gPopup = document.getElementById('placeCheck4');
        gPopup.style.fontSize = parseFloat(Math.round(28 * tempScale * 100) / 100).toFixed(0) + "px";
        gPopup = document.getElementById('placeCheck1');
        gPopup.style.fontSize = parseFloat(Math.round(28 * tempScale * 100) / 100).toFixed(0) + "px";
        gPopup = document.getElementById('placeCheck2');
        gPopup.style.fontSize = parseFloat(Math.round(28 * tempScale * 100) / 100).toFixed(0) + "px";
        gPopup = document.getElementById('check3');
        gPopup.style.fontSize = parseFloat(Math.round(28 * tempScale * 100) / 100).toFixed(0) + "px";
        gPopup = document.getElementById('check4');
        gPopup.style.fontSize = parseFloat(Math.round(28 * tempScale * 100) / 100).toFixed(0) + "px";
        gPopup = document.getElementById('check1');
        gPopup.style.fontSize = parseFloat(Math.round(28 * tempScale * 100) / 100).toFixed(0) + "px";
        gPopup = document.getElementById('check2');
        gPopup.style.fontSize = parseFloat(Math.round(28 * tempScale * 100) / 100).toFixed(0) + "px";
        
        
        
        gPopup = document.getElementById('popupGames');
        gPopup.style.maxWidth = (580 * tempScale) + "px";
        gPopup.style.width = (580 * tempScale) + "px";
        gPopup = document.getElementById('popupHeader41');
        gPopup.style.fontSize = parseFloat(Math.round(20 * tempScale * 100) / 100).toFixed(0) + "px";
        gPopup = document.getElementById('popupHeader42');
        gPopup.style.fontSize = parseFloat(Math.round(20 * tempScale * 100) / 100).toFixed(0) + "px";
        gPopup = document.getElementById('popupHeader43');
        gPopup.style.fontSize = parseFloat(Math.round(20 * tempScale * 100) / 100).toFixed(0) + "px";
        gPopup = document.getElementById('popupHeader44');
        gPopup.style.fontSize = parseFloat(Math.round(20 * tempScale * 100) / 100).toFixed(0) + "px";
        gPopup = document.getElementById('popupHeader45');
        gPopup.style.fontSize = parseFloat(Math.round(20 * tempScale * 100) / 100).toFixed(0) + "px";
        
        
        gPopup = document.getElementById('popupTabs');
        gPopup.style.maxWidth = (580 * tempScale) + "px";
        gPopup.style.width = (580 * tempScale) + "px";
        
        gPopup = document.getElementById('popupHeader51');
        gPopup.style.fontSize = parseFloat(Math.round(17 * tempScale * 100) / 100).toFixed(0) + "px";
        gPopup = document.getElementById('popupHeader52');
        gPopup.style.fontSize = parseFloat(Math.round(17 * tempScale * 100) / 100).toFixed(0) + "px";
        gPopup = document.getElementById('popupHeader53');
        gPopup.style.fontSize = parseFloat(Math.round(17 * tempScale * 100) / 100).toFixed(0) + "px";
        gPopup = document.getElementById('popupHeader54');
        gPopup.style.fontSize = parseFloat(Math.round(17 * tempScale * 100) / 100).toFixed(0) + "px";
        
        gPopup = document.getElementById('tabs-1');
        gPopup.style.fontSize = parseFloat(Math.round(28 * tempScale * 100) / 100).toFixed(0) + "px";
        gPopup = document.getElementById('tabs-1x');
        gPopup.style.fontSize = parseFloat(Math.round(28 * tempScale * 100) / 100).toFixed(0) + "px";
        gPopup = document.getElementById('tabs-2');
        gPopup.style.fontSize = parseFloat(Math.round(28 * tempScale * 100) / 100).toFixed(0) + "px";
        gPopup = document.getElementById('tabs-2x');
        gPopup.style.fontSize = parseFloat(Math.round(28 * tempScale * 100) / 100).toFixed(0) + "px";
        gPopup = document.getElementById('tabs-3');
        gPopup.style.fontSize = parseFloat(Math.round(28 * tempScale * 100) / 100).toFixed(0) + "px";
        gPopup = document.getElementById('tabs-3x');
        gPopup.style.fontSize = parseFloat(Math.round(28 * tempScale * 100) / 100).toFixed(0) + "px";
        gPopup = document.getElementById('closepopup5');
        gPopup.style.fontSize = parseFloat(Math.round(22 * tempScale * 100) / 100).toFixed(0) + "px";
        gPopup = document.getElementById('tabs-4');
        gPopup.style.fontSize = parseFloat(Math.round(24 * tempScale * 100) / 100).toFixed(0) + "px";
        gPopup = document.getElementById('tabs-1w');
        gPopup.style.fontSize = parseFloat(Math.round(24 * tempScale * 100) / 100).toFixed(0) + "px";
        gPopup = document.getElementById('tabs-2w');
        gPopup.style.fontSize = parseFloat(Math.round(24 * tempScale * 100) / 100).toFixed(0) + "px";
        
        
        
        
        gPopup = document.getElementById('popupWin');
        gPopup.style.maxWidth = (500 * tempScale) + "px";
        gPopup.style.width = (500 * tempScale) + "px";
        gPopup = document.getElementById('popupHeader6');
        gPopup.style.fontSize = parseFloat(Math.round(32 * tempScale * 100) / 100).toFixed(0) + "px";
        gPopup = document.getElementById('Winmessage');
        gPopup.style.fontSize = parseFloat(Math.round(30 * tempScale * 100) / 100).toFixed(0) + "px";
        gPopup = document.getElementById('closepopup6');
        gPopup.style.fontSize = parseFloat(Math.round(22 * tempScale * 100) / 100).toFixed(0) + "px";
        gPopup = document.getElementById('btnNewGame');
        gPopup.style.fontSize = parseFloat(Math.round(22 * tempScale * 100) / 100).toFixed(0) + "px";
        gPopup = document.getElementById('btnSwitchGame');
        gPopup.style.fontSize = parseFloat(Math.round(22 * tempScale * 100) / 100).toFixed(0) + "px";
        
        
        gPopup = document.getElementById('popupIHelp');
        gPopup.style.maxWidth = (130 * tempScale) + "px";
        gPopup.style.width = (130 * tempScale) + "px";
        gPopup = document.getElementById('popupHeader7');
        gPopup.style.fontSize = parseFloat(Math.round(16 * tempScale * 100) / 100).toFixed(0) + "px";
        
        
        
        tempWd = $("#wordbox");
        tempWdX = document.getElementById('wordbox');
        
        //tempScale = "width=640, initial-scale=" + tempScale + ", maximum-scale=" + tempScale + ", minimum-scale=" + tempScale;// +  ", minimal-ui"; // + ", user-scalable=no";
        //mvp = document.getElementById('viewport');
        //mvp.setAttribute('content',tempScale);


        //document.getElementById('xcoord').innerHTML = "W: " + browserWidth;
        //document.getElementById('xcoord2').innerHTML = "H: " + browserHeight;
        //document.getElementById('ycoord').innerHTML = "S: " + parseFloat(Math.round(tempScale * 100) / 100).toFixed(2);
        //document.getElementById('ycoord2').innerHTML = "C: " + cWidth;

        //document.getElementById('scorebox').innerHTML = "&nbsp&nbsp";
        //document.getElementById('scoreratebox').innerHTML = "&nbsp&nbsp";
   }
    
    
</script>



</head>

<body onload="webGLStart();">
    
    <div id="progressbar">
        <div>
            <div id="meter1"></div>
        </div>
    </div>
    
    <div id="splash">
        <img alt="" src="images/WordCubedLogo-1024.png">
    </div>
    
    <div id="topAlign">
    </div>
    
    <div data-role="page" id="pageWH">
        
        <div data-role="header" id="topHeader" class="ui-shadow ui-corner-top">
            <table id="btnTable">
                <tr>

                    <td ><button id = "btnhints" type="button" onclick="tapHintsButton();"></button>
                    <label id="xcoord" ></label>
                    </td>
                    <td ><button id = "btnsettings" type="button" onclick="tapSettingsButton();"></button>
                    <label id="xcoord2" ></label>
                    </td>
                    <td ><button id = "btngames" type="button" onclick="tapGamesButton();"></button>
                    <label id="ycoord" ></label>
                    </td>
                    <td ><button id = "btninfo" type="button" onclick="tapInfoButton();"></button>
                    <label id="ycoord2" ></label>
                    </td>
                    <td id = "starbox">
                    <!--<label id="contextStatus" >&nbsp;</label>-->
                    </td>
                    
                    <td id = "srsbox"><label id="scoreratebox" title=" Score Rate ">&nbsp;&nbsp;</label><label id="scorebox" title=" Score ">&nbsp;&nbsp;</label></td>
                    
                </tr>
                
            </table>
             
	</div><!-- /header -->
        
        
        <div id="container">
            <canvas id="WordCubed-canvas" style="border: none;" width="640" height="640"></canvas>
	</div>
        
        
        <div data-role="footer" id="bottomFooter" class="ui-shadow-inset ui-corner-bottom" title=" Tap to see all words ">
            <p id="wordbox"></p>
	</div><!-- /footer -->
        
        
        <div data-role="popup" id="popupBasic" class="ui-content" style="max-width:600px" data-dismissible="false">
            <p id="wordboxpopup"></p>
            <a id="closepopup1" href="#"  onclick="ClosePopupBasic()" class="ui-btn ui-shadow ui-corner-all ui-btn-b ui-btn-inline" style="font-size:22px"></a>
        </div>
        
        
        <div data-role="popup" id="popupHints" class="ui-content" style="max-width:500px" data-dismissible="false">
            <div id="popupHeader2" data-role="header" data-theme="b" style="font-size:32px">
                <h1 id="header1"></h1>
            </div>
            <p><a id="showHint" href="#"  onclick="showHint();" class="ui-btn ui-shadow ui-corner-all"></a></p>
            <p><a id="solveTheCube" href="#"  onclick="SolveTheCube();" class="ui-btn ui-shadow ui-corner-all"></a></p>
            <a id="closepopup2" href="#"  onclick="ClosePopupHints();" class="ui-btn ui-shadow ui-corner-all ui-btn-b ui-btn-inline" style="font-size:22px"></a>
        </div>
        
        
        <div data-role="popup" id="popupSettings" class="ui-content" style="max-width:500px" data-dismissible="false">
            <div id="popupHeader3" data-role="header" data-theme="b" style="font-size:32px">
                <h1 id="header2"></h1>
            </div>
            <p id="placeCheck3" class="ui-shadow ui-corner-all" ><input id="check3" type="checkbox" onclick="ToggleMusic();"><label id="check3id" for="check3"></label></p>
            <p id="placeCheck4" class="ui-shadow ui-corner-all" ><input id="check4" type="checkbox" onclick="ToggleSound();"><label id="check4id" for="check4"></label></p>
            <p id="placeCheck1" class="ui-shadow ui-corner-all" ><input id="check1" type="checkbox" onclick="ToggleDensity();"><label id="check1id" for="check1"></label></p>
            <p id="placeCheck2" class="ui-shadow ui-corner-all" ><input id="check2" type="checkbox" onclick="ToggleInverse();"><label id="check2id" for="check2"></label></p>
            <p><a id="buttonNewGame" href="#"  onclick="ButtonNewGameSettings();" class="ui-btn ui-shadow ui-corner-all"></a></p>
            <a id="closepopup3" href="#"  onclick="ClosePopupSettings();" class="ui-btn ui-shadow ui-corner-all ui-btn-b ui-btn-inline" style="font-size:22px"></a>
        </div>
        
        
        <div data-role="popup" id="popupGames" class="ui-widget" style="max-width:600px" data-dismissible="false">
            <table id="users" class="ui-widget ui-widget-content">
              <thead>
                <tr class="ui-widget-header ">
                  <th id="popupHeader41"></th>
                  <th id="popupHeader42"></th>
                  <th id="popupHeader43"></th>
                  <th id="popupHeader44"></th>
                </tr>
              </thead>
              <tfoot>
                <tr>
                  <td id="popupHeader45" colspan="4"></td>
                </tr>
              </tfoot>
              <tbody id="usersTBody"></tbody>
            </table>
        </div>
        
        
        <div data-role="popup" id="popupTabs" class="ui-content" style="max-width:600px" data-dismissible="false">
            <div id="popupHeader50" data-role="tabs">
                <ul>
                  <li><a id="popupHeader51" href="#tabs-1" onclick="PlayBloop();"></a></li>
                  <li><a id="popupHeader52" href="#tabs-2" onclick="PlayBloop();"></a></li>
                  <li><a id="popupHeader53" href="#tabs-3" onclick="PlayBloop();"></a></li>
                  <li><a id="popupHeader54" href="#tabs-4" onclick="PlayBloop();"></a></li>
                </ul>

                <div id="tabs-1">
                  <p id="tabs-1x"></p>
                </div>
                <div id="tabs-2">
                  <p id="tabs-2x"></p>
                </div>
                <div id="tabs-3">
                    <p id="tabs-3x"></p>
                </div>
                
                <div id="tabs-4">
                    
                    <div>
                        <p id="tabs-1w"></p>
                    </div>
                    <div>
                        <table style="width: 100%;">
                            <tr>
                                <td id="tabs-3w"></td>
                            </tr>
                        </table>
                    </div>
                    
                    <div>
                        <p id="tabs-2w"></p>
                    </div>
                    
                </div>
                <div>
                    <a href="#" id="closepopup5" onclick="ClosePopupTabs();" class="ui-btn ui-shadow ui-corner-all ui-btn-b ui-btn-inline" style="font-size:22px"></a>
                </div>
            </div>
        </div>
        
        
        
        <div data-role="popup" id="popupWin" class="ui-content" style="max-width:500px" data-dismissible="false">
            <div id="popupHeader6" data-role="header" data-theme="b" style="font-size:32px">
                <h1 id="header3"></h1>
            </div>
            <p id="Winmessage" style="font-size:30px"></p>
            <div>
                <table style="width: 100%;">
                    <tr>
                        <td colspan="2">
                            <a id="closepopup6" href="#"  onclick="ClosePopupWin();" class="ui-btn ui-shadow ui-corner-all ui-btn-b ui-btn-inline" style="font-size:22px"></a>
                            <label></label>
                        </td>
                    </tr>
                    <tr>
                        <td>
                            <a id="btnNewGame" href="#"  onclick="ButtonNewGameWin();" class="ui-btn ui-shadow ui-corner-all ui-btn-b ui-btn-inline" style="font-size:22px"></a>
                        </td>
                        <td>
                            <a id="btnSwitchGame" href="#"  onclick="ShowAllGamesClose();" class="ui-btn ui-shadow ui-corner-all ui-btn-b ui-btn-inline" style="font-size:22px"></a>
                        </td>
                    </tr>
                </table>
            </div>
        </div>
        
        
        
        <div data-role="popup" id="popupIHelp" data-arrow="t" class="ui-content">
            <div id="popupHeader7" data-role="header" data-theme="a" class="ui-corner-all">
                <h1 id="header4"></h1>
            </div>
            
        </div>
        
        <!--
        <div id="agentdisplay">
	</div>
        <div id="agentdisplay2">
	</div>
        -->
    </div> <!--/WH page -->
        
   
</body>

</html>